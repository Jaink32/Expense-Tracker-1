<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="~{layouts/master :: headelement}">

</head>
<body class="sb-nav-fixed">
<nav  th:replace="~{layouts/master :: navelement}">

</nav>
<div id="layoutSidenav">
    <div  th:replace="~{layouts/master :: sidebarelement}">

    </div>
    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">Dashboard</h1>
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                    <li class="breadcrumb-item active">Blank Page</li>
                </ol>
                <div class="card mb-4">
                    <div class="card-body">
                        <!-- Place any introductory text or instructions here -->
                        This is a blank page layout where you can add your content.
                    </div>
                </div>
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-blank me-1"></i>
                        Section Title
                    </div>
                    <div class="card-body">
                        <!-- Add any content you want in this section -->
                        <p>Content for this section goes here.</p>
                    </div>
                </div>
            </div>
        </main>
        <footer  th:replace="~{layouts/master :: footerelement}">

        </footer>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="js/scripts.js"></script>
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
<script src="js/datatables-simple-demo.js"></script>

<!-- JavaScript for handling AJAX requests -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {

        $.ajax({
            url: "/total-expenses",
            method: "GET",
            success: function(data) {
                $('#total-expenses').html(`
                <div class="expense-details">
                    <div class="expense-item"><span class="label">Monthly:</span> <span class="value">$${data.monthly.toFixed(2)}</span></div>
                    <div class="expense-item"><span class="label">Weekly:</span> <span class="value">$${data.weekly.toFixed(2)}</span></div>
                    <div class="expense-item"><span class="label">Yearly:</span> <span class="value">$${data.yearly.toFixed(2)}</span></div>
                </div>
            `);
            },
            error: function(error) {
                $('#total-expenses').html('Error fetching data');
            }
        });


         // Fetch Total Incomes Data
    $.ajax({
        url: "/total-incomes",
        method: "GET",
        success: function(data) {
             $('#total-incomes').html(`
                <div class="expense-details">
                    <div class="income-item">
                        <span class="label">Monthly:</span> <span class="value">$${data.monthly.toFixed(2)}</span>
                    </div>
                    <div class="income-item">
                        <span class="label">Weekly:</span> <span class="value">$${data.weekly.toFixed(2)}</span>
                    </div>
                    <div class="income-item">
                        <span class="label">Yearly:</span> <span class="value">$${data.yearly.toFixed(2)}</span>
                    </div>
                </div>
            `);
        },
        error: function(error) {
            $('#total-incomes').html('Error fetching data');
        }
    });

    // Fetch Total Transactions Data
    $.ajax({
        url: "/total-transactions", // Endpoint you defined in the controller
        method: "GET",
        success: function(data) {
            // Display the total transactions data in the HTML
            $('#total-transactions').html(`
                <div class="transaction-details">
                    <div class="transaction-item"><span class="label">Monthly:</span> <span class="value">${data.monthly}</span></div>
                    <div class="transaction-item"><span class="label">Weekly:</span> <span class="value">${data.weekly}</span></div>
                    <div class="transaction-item"><span class="label">Yearly:</span> <span class="value">${data.yearly}</span></div>
                </div>
            `);
        },
        error: function(error) {
            // If there is an error with the AJAX request, display an error message
            $('#total-transactions').html('Error fetching data');
        }
    });








    });


</script>
</body>
</html>
